1.  기존 React 앱의 데이터 패칭 방식

-   클라이언트 사이드 렌더링(CSR)에서 보통 useEffect + fetch로 데이터
    요청.
-   컴포넌트가 마운트된 이후에야 서버로 요청이 가기 때문에, 화면에
    로딩이 길게 보이는 단점이 있음.
-   즉, 데이터가 준비되기 전까지는 빈 화면이거나 로딩 스피너만 보여서
    사용자 경험이 떨어질 수 있음.

2.  CSR의 한계

-   데이터 요청 → 응답 → state 업데이트 → 다시 렌더링의 과정이 필요.
-   이 때문에 FCP(First Contentful Paint)가 느려지고, 결국 사용자가
    화면을 보기까지 시간이 지체됨.
-   또 요청이 늦게 시작되다 보니 네트워크 상황이 안 좋으면 더 늦어지는
    문제가 있음.

3.  Next.js의 사전 렌더링 개념

-   Next.js는 이런 문제를 해결하기 위해 사전 렌더링을 제공.
-   사전 렌더링이란, 브라우저가 HTML을 그리기 전에 서버에서 미리
    데이터를 가져와서 완성된 HTML을 만들어 주는 방식.
-   브라우저는 이미 채워진 HTML을 받기 때문에, 사용자 입장에서는 첫 화면
    로딩이 훨씬 빠르게 느껴짐.

4.  사전 렌더링 방식의 종류

-   SSR (Server-Side Rendering): 매 요청 시 서버에서 HTML을 새로
    만들어서 내려줌.
-   SSG (Static Site Generation): 빌드 시점에 HTML을 미리 만들어 두고,
    이후 요청에는 그 정적인 파일을 그대로 제공.
-   ISR (Incremental Static Regeneration): 기본적으로는 정적 페이지지만,
    일정 주기마다 서버에서 새로 렌더링해 최신 데이터로 교체.

5.  정리

-   React 기본 방식(CSR): 단순하지만 첫 화면 로딩이 느려짐.
-   Next.js SSR: 서버에서 매번 데이터를 가져와 HTML 생성 → 최신성 확보
    가능.
-   Next.js SSG: 빌드 타임에 HTML 생성 → 매우 빠르지만, 데이터가 변해도
    반영 안 됨.

1. SSR의 개념

-   Next.js에서 제공하는 사전 렌더링 방식 중 하나.
-   브라우저가 페이지를 요청할 때마다 서버에서 새로 HTML을 생성해
    내려주는 방식.
-   항상 최신 데이터를 반영할 수 있다는 장점이 있음.

2. 실습 과정

- pages/index.tsx 파일을 열어 SSR 방식으로 동작하도록 설정.
-   Next.js에서는 getServerSideProps라는 함수를 사용해 SSR을 구현.
-   해당 함수는 서버에서 실행되며, 페이지 컴포넌트에 필요한 데이터를
    미리 불러와 props 형태로 전달.

3. getServerSideProps 동작 방식

1.  사용자가 특정 경로를 요청하면 Next.js 서버가 해당 페이지의
    getServerSideProps를 실행.
2.  서버에서 필요한 데이터를 불러옴.
3.  불러온 데이터를 props로 페이지 컴포넌트에 전달.
4.  최종적으로 서버에서 완성된 HTML을 클라이언트에게 내려줌.

4. 주요 특징

-  `getServerSideProps는 반드시 객체를 반환해야 하며, 그 안에는
    props 키가 포함되어야 함.
-   반환된 props는 해당 페이지 컴포넌트의 props로 전달됨.
-   이 함수는 오직 서버에서만 실행됨. 따라서 브라우저 환경 객체(window,
    document 등)는 사용할 수 없음.
-   콘솔 출력은 브라우저가 아닌 서버 터미널에서 확인 가능.

5. 주의사항

-   서버에서만 실행되는 코드와 브라우저에서 실행되는 코드를 구분해야 함.
-   브라우저 전용 객체(window, alert 등)를 getServerSideProps 안에서
    사용하면 에러 발생.
-   브라우저에서만 실행하고 싶은 코드는 useEffect 훅을 활용해야 함.

6. 타입 지정

-   Next.js는 InferGetServerSidePropsType을 제공하여
    getServerSideProps가 반환하는 props의 타입을 자동으로 추론할 수
    있음.
-   이를 활용하면 props 타입을 일일이 정의하지 않고도 안전하게 타입을
    관리 가능.

